<%= render partial: 'shared/header', locals: { title: 'Dashboard', subtitle: 'All the reports' } %>
<%= render partial: 'shared/date_filter', locals: {startdate: @startdate, enddate: @enddate, sigother: @sigother} %>

<section class="section chart">
  <h1 class="title">
    Total
  </h1>
  <h2 class="subtitle">
    Info
  </h2>
  <div class="block">
    Number of months: <%= @number_of_months %>
    <br />
    Net: <%= Money.from_cents(@net_amount * 100).format %>
    <br/>
    Net Income: <%= Money.from_cents(@net_income_amount * 100).format %>
    <br/>
    Net Spending: <%= Money.from_cents(@net_spending_amount * 100).format %>
    <br />
    Avg Monthly Income: <%= Money.from_cents(@net_income_amount / @number_of_months * 100).format %>
    <br/>
    Avg Monthly Spending: <%= Money.from_cents(@net_spending_amount / @number_of_months * 100).format %>
  </div>
  <h2 class="subtitle">
    Transactions
  </h2>
  <%= pie_chart @transactions.group(:category).count %>
  <h2 class="subtitle">
    Spend
  </h2>
  <%= pie_chart @spend %>
</section>

<section class="section chart">
  <h1 class="title">
    Per Month
  </h1>
  <h2 class="subtitle">
    Income
  </h2>
  <%= column_chart @income_per_month %>
  <h2 class="subtitle">
    Income by merchant
  </h2>
  <%= line_chart @income_per_month_by_merchant %>
  <h2 class="subtitle">
    Spending
  </h2>
  <%= column_chart @spend_per_month %>
  <h2 class="subtitle">
    Spend per category
  </h2>
  <%= line_chart @spending_by_category_per_month %>
  <h2 class="subtitle">
    Income and spending
  </h2>
  <%= line_chart @income_and_spending %>
  <h2 class="subtitle">
    Net
  </h2>
  <%= column_chart @net_per_month %>
</section>

<section class="section chart">
  <h1 class="title">
    Restaurants
  </h1>
  <h2 class="subtitle">
    Total (over $100)
  </h2>
  <%= column_chart @restaurants %>
  <h2 class="subtitle">
    Times (over 5)
  </h2>
  <%= column_chart @restaurant_times %>
</section>

<section class="section">
  <h1 class="title">
    Grocery
  </h1>
  <h2 class="subtitle">
    Total (over $100)
  </h2>
  <%= column_chart @grocery %>
</section>

<section class="section">
  <h1 class="title">
    Services
  </h1>
  <h2 class="subtitle">
    Total
  </h2>
  <%= column_chart @all_services %>
  <h2 class="subtitle">
    Total (over $100)
  </h2>
  <%= column_chart @services %>
</section>
