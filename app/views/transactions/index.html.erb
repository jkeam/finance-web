<%= render partial: 'shared/header', locals: { title: 'Transaction', subtitle: 'All the transactions' } %>
<%= render partial: 'shared/date_filter', locals: {startdate: @startdate, enddate: @enddate} %>

<section class="section">
  <h1 class="title">
    Listing
  </h1>
  <h2 class="subtitle">
    All transactions
  </h2>

  <table class="table is-fullwidth is-striped">
    <thead>
      <tr>
        <th><abbr title="ID">ID</abbr></th>
        <th><abbr title="Transaction Date">Transaction Date</abbr></th>
        <th><abbr title="Cleared Date">Cleared Date</abbr></th>
        <th><abbr title="Description">Description</abbr></th>
        <th><abbr title="Merchant">Merchant</abbr></th>
        <th><abbr title="Category">Category</abbr></th>
        <th><abbr title="Type">Type</abbr></th>
        <th><abbr title="Amount">Amount</abbr></th>
        <th><abbr title="Purchased By">Purchased By</abbr></th>
        <th><abbr title="Account">Account</abbr></th>
      </tr>
    </thead>
    <tfoot>
      <tr>
        <th><abbr title="Id">Id</abbr></th>
        <th><abbr title="Transaction Date">Transaction Date</abbr></th>
        <th><abbr title="Cleared Date">Cleared Date</abbr></th>
        <th><abbr title="Description">Description</abbr></th>
        <th><abbr title="Merchant">Merchant</abbr></th>
        <th><abbr title="Category">Category</abbr></th>
        <th><abbr title="Type">Type</abbr></th>
        <th><abbr title="Amount">Amount</abbr></th>
        <th><abbr title="Purchased By">Purchased By</abbr></th>
        <th><abbr title="Account">Account</abbr></th>
      </tr>
    </tfoot>
    <tbody>
      <%- @transactions.each do |b| %>
      <tr>
        <th><%= link_to b.id, transaction_path(b) %></th>
        <td>
          <%= b.transaction_date %>
        </td>
        <td>
          <%= b.clearing_date %>
        </td>
        <td>
          <%= b.description %>
        </td>
        <td>
          <%= b.merchant %>
        </td>
        <td>
          <%= Transaction.pretty_print_category(b.category) %>
        </td>
        <td>
          <%= Transaction.pretty_print_type(b.transaction_type) %>
        </td>
        <td>
          <%= b.amount %>
        </td>
        <td>
          <%= b.purchased_by %>
        </td>
        <td>
          <%= link_to b.account.name, bank_path(b) %>
        </td>
      </tr>
      <%- end %>
    </tbody>
  </table>
  <%== pagy_nav(@pagy) if @pagy.pages > 1 %>
</section>

